# Тестовое задание для отбора на Летнюю ИТ-школу КРОК по разработке

## Условие задания
Один развивающийся и перспективный маркетплейс активно растет в настоящее время. Текущая команда разработки вовсю занята тем, что развивает ядро системы. Помимо этого, перед CTO маркетплейса стоит задача — разработать подсистему аналитики, которая на основе накопленных данных формировала бы разнообразные отчеты и статистику.

Вы — компания подрядчик, с которой маркетплейс заключил рамочный договор на выполнение работ по разработке этой подсистемы. В рамках первого этапа вы условились провести работы по прототипированию и определению целевого технологического стека и общих подходов к разработке.

На одном из совещаний с Заказчиком вы определили задачу, на которой будете выполнять работы по прототипированию. В качестве такой задачи была выбрана разработка отчета о периодах наибольших трат со стороны пользователей.

Аналитики со стороны маркетплейса предоставили небольшой срез массива данных (файл format.json) о покупках пользователей, на примере которого вы смогли бы ознакомиться с форматом входных данных. Каждая запись данного среза содержит следующую информацию:
- Идентификатор пользователя;
- Дата и время оформления заказа;
- Статус заказа;
- Сумма заказа.

В пояснительной записке к массиву данных была уточняющая информация относительно статусов заказов:
- COMPLETED (Завершенный заказ);
- CANCELED (Отмененный заказ);
- CREATED (Созданный заказ, еще не оплаченный);
- DELIVERY (Созданный и оплаченный заказ, который доставляется).

Необходимо разработать отчет, вычисляющий по полученному массиву данных месяц, когда пользователи тратили больше всего. Если максимальная сумма пользовательских трат была в более, чем одном месяце, отчет должен показывать все такие месяцы. В отчете должны учитываться только завершенные заказы.

Требования к реализации:
1. Реализация должна содержать, как минимум, одну процедуру (функцию/метод), отвечающую за формирование отчета, и должна быть описана в readme.md в соответствии с чек-листом;
2. В качестве входных данных программа использует json-файл (input.json), соответствующий структуре, описанной в условиях задания;
3. Процедура (функция/метод) формирования отчета должна возвращать строку в формате json следующего формата:
   - {«months»: [«march»]} 
   - {«months»: [«march», «december»]}
4. Найденный в соответствии с условием задачи месяц должен выводиться на английском языке в нижнем регистре. Если месяцев несколько, то на вывод они все подаются на английском языке в нижнем регистре в порядке их следования в течение года.

## Автор решения
Молькова Анастасия Евгеньевна
## Описание реализации
**Решение состоит из трех файлов:**
1. Файл с необходимыми заголовками (task1.hpp);
2. Файл с реализацией необходимых функций (task1_functions.cpp);
3. Файл с запуском решения, вызовом функций (task1.cpp).
   
**Алгоритм решения:**
1. Получение данных из JSON-файла;
2. Заполнение массива структур заказами из полученных данных;
3.1. Подсчет суммы заказов в каждый из подходящих под условие месяцев. Данные хранятся в массиве пар <номер месяца, сумма>
3.2. Вычисление максимума по сумме среди месяцев;
3.3 Получение массива ответов(в числовом виде) - все месяцы с максимальной суммой трат;
4. Сортировка месяцев(для вывода в порядке следования в году);
5. Стандартный вывод ответа в консоль(месяц из числового формата переводится в название месяцы маленькими латинскими буквами);
6. Формирование файла output.json со строкой ответа.

**Особенности реализации:**
Не указано другое(отличное от данного в задании) имя файла, используется по умолчанию input.json.
Поиск месяца с максимальными тратами из завершенных заказов осуществляется за последний полный год(для этого узнается текущее время и берутся предыдущие 12 полных месяцев).
Для хранения информации о заказе используется структура `Order` описанная в файле `task1.hpp`.
## Инструкция по сборке и запуску решения
1. Скопировать репозиторий
```
git clone https://github.com/Pihtaw/school2024-test-task1.git
```
или же скачать .ZIP-архив;

2. Перейти в репозиторий -> в папку build;
```
cd build
```
3. Запустить команду cmake, передав ей в качестве параметра путь к папке с исходниками
```
cmake ..
```
4. Собрать решение
```
make
```
5. Перейти в папку с решением
```
cd ../src
```
6. Запустить исполняемый файл 
```
./task1
```
