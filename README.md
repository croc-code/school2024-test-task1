# Тестовое задание для отбора на Летнюю ИТ-школу КРОК по разработке

## Условие задания
Один развивающийся и перспективный маркетплейс активно растет в настоящее время. Текущая команда разработки вовсю занята тем, что развивает ядро системы. Помимо этого, перед CTO маркетплейса стоит задача — разработать подсистему аналитики, которая на основе накопленных данных формировала бы разнообразные отчеты и статистику.

Вы — компания подрядчик, с которой маркетплейс заключил рамочный договор на выполнение работ по разработке этой подсистемы. В рамках первого этапа вы условились провести работы по прототипированию и определению целевого технологического стека и общих подходов к разработке.

На одном из совещаний с Заказчиком вы определили задачу, на которой будете выполнять работы по прототипированию. В качестве такой задачи была выбрана разработка отчета о периодах наибольших трат со стороны пользователей.

Аналитики со стороны маркетплейса предоставили небольшой срез массива данных (файл format.json) о покупках пользователей, на примере которого вы смогли бы ознакомиться с форматом входных данных. Каждая запись данного среза содержит следующую информацию:
- Идентификатор пользователя;
- Дата и время оформления заказа;
- Статус заказа;
- Сумма заказа.

В пояснительной записке к массиву данных была уточняющая информация относительно статусов заказов:
- COMPLETED (Завершенный заказ);
- CANCELED (Отмененный заказ);
- CREATED (Созданный заказ, еще не оплаченный);
- DELIVERY (Созданный и оплаченный заказ, который доставляется).

Необходимо разработать отчет, вычисляющий по полученному массиву данных месяц, когда пользователи тратили больше всего. Если максимальная сумма пользовательских трат была в более, чем одном месяце, отчет должен показывать все такие месяцы. В отчете должны учитываться только завершенные заказы.

Требования к реализации:
1. Реализация должна содержать, как минимум, одну процедуру (функцию/метод), отвечающую за формирование отчета, и должна быть описана в readme.md в соответствии с чек-листом;
2. В качестве входных данных программа использует json-файл (input.json), соответствующий структуре, описанной в условиях задания;
3. Процедура (функция/метод) формирования отчета должна возвращать строку в формате json следующего формата:
   - {«months»: [«march»]} 
   - {«months»: [«march», «december»]}
4. Найденный в соответствии с условием задачи месяц должен выводиться на английском языке в нижнем регистре. Если месяцев несколько, то на вывод они все подаются на английском языке в нижнем регистре в порядке их следования в течение года.

## Автор решения
Дженбаз Артур Ринатович
## Описание реализации
Решение представлено на языке Java.

Для выполнения данного задания была использована библиотека JSON.simple, поскольку она предоставляет простой и понятный API для работы с JSON в Java.

Алгоритм работы метода _generateReport_ (метод формирования отчёта):
1. Чтение JSON-файла и парсинг данных в массив JSON-объектов (JSONArray). Таким образом, каждая покупка пользователя будет представлять JSON-объект, который в дальнейшем мы будем анализировать.
2. Создание списка месяцев в порядке их следования в течение года (для корректности вывода по условию задачи).
3. Создание Map для хранения суммы общих трат пользователей за каждый месяц. Ключами являются названия месяцев в нижнем регистре, а значениями - общая сумма трат в соответствующем месяце (изначально все значения равны 0). Используется LinkedHashMap для соблюдения порядка следования месяцев в течение года.
4. Обход JSON-массива и вычисление суммы трат пользователей за конкретный месяц. Цикл проходит через каждый заказ и проверяет его статус. Если статус заказа - "COMPLETED" (то есть заказ является завершенным), то мы считываем с заказа месяц и сумму покупки. Затем в Map по ключу полученного месяца мы добавляем сумму покупки к общей сумме трат за месяц.
5. Вычисление максимальной суммы трат за месяц и создание списка месяцев с такой суммой. В случае, если месяц с наибольшими тратами пользователей не один, то в список они записываются в порядке их следования в течении года.
6. Создание JSON-объекта с месяцами, имеющими максимальную сумму трат. В созданный JSON-объект помещается список месяцев с максимальной суммой трат. Затем метод преобразует этот JSON-объект в строку и возвращает её.

В результате выполнения кода мы получаем список месяцев, в которых была зафиксирована наибольшая сумма трат пользователей. В методе _main_ выводим этот список в формате JSON.
## Инструкция по сборке и запуску решения
1. Убедитесь, что на вашем компьютере установлена JDK.
2. Склонируйте репозиторий c проектом на свой локальный компьютер.
3. Откройте проект в IntelliJ IDEA
4. Откройте папку src и перейдите в файл Main.java
5. Запустите приложение

При необходимости проверить другие входные данные измените содержимое файла _format.json_. Также можете добавить новый JSON-файл в папку с проектом и изменить название файла в переменной _filepath_ в _main_-методе.