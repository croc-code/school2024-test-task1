# Тестовое задание для отбора на Летнюю ИТ-школу КРОК по разработке

## Условие задания
Один развивающийся и перспективный маркетплейс активно растет в настоящее время. Текущая команда разработки вовсю занята тем, что развивает ядро системы. Помимо этого, перед CTO маркетплейса стоит задача — разработать подсистему аналитики, которая на основе накопленных данных формировала бы разнообразные отчеты и статистику.

Вы — компания подрядчик, с которой маркетплейс заключил рамочный договор на выполнение работ по разработке этой подсистемы. В рамках первого этапа вы условились провести работы по прототипированию и определению целевого технологического стека и общих подходов к разработке.

На одном из совещаний с Заказчиком вы определили задачу, на которой будете выполнять работы по прототипированию. В качестве такой задачи была выбрана разработка отчета о периодах наибольших трат со стороны пользователей.

Аналитики со стороны маркетплейса предоставили небольшой срез массива данных (файл format.json) о покупках пользователей, на примере которого вы смогли бы ознакомиться с форматом входных данных. Каждая запись данного среза содержит следующую информацию:
- Идентификатор пользователя;
- Дата и время оформления заказа;
- Статус заказа;
- Сумма заказа.

В пояснительной записке к массиву данных была уточняющая информация относительно статусов заказов:
- COMPLETED (Завершенный заказ);
- CANCELED (Отмененный заказ);
- CREATED (Созданный заказ, еще не оплаченный);
- DELIVERY (Созданный и оплаченный заказ, который доставляется).

Необходимо разработать отчет, вычисляющий по полученному массиву данных месяц, когда пользователи тратили больше всего. Если максимальная сумма пользовательских трат была в более, чем одном месяце, отчет должен показывать все такие месяцы. В отчете должны учитываться только завершенные заказы.

Требования к реализации:
1. Реализация должна содержать, как минимум, одну процедуру (функцию/метод), отвечающую за формирование отчета, и должна быть описана в readme.md в соответствии с чек-листом;
2. В качестве входных данных программа использует json-файл (input.json), соответствующий структуре, описанной в условиях задания;
3. Процедура (функция/метод) формирования отчета должна возвращать строку в формате json следующего формата:
   - {«months»: [«march»]} 
   - {«months»: [«march», «december»]}
4. Найденный в соответствии с условием задачи месяц должен выводиться на английском языке в нижнем регистре. Если месяцев несколько, то на вывод они все подаются на английском языке в нижнем регистре в порядке их следования в течение года.

## Автор решения
Проходцев Сергей Олегович

## Описание реализации
1. Импортирует необходимые модули: `defaultdict` из `collections`, `datetime` из `datetime` и `json`.
2. Открывает файл с данными `input.json`.
3. Считывает данные из файла в формате JSON и сохраняет их в переменную `data`.
4. Функция `generate_report(data)` генерирует отчет о расходах за месяц на основе данных из `data`.
    - Создает словарь `monthly_expenses`, где ключами являются названия месяцев, а значениями - суммарные расходы за каждый месяц.
    - Проходит по каждой записи в `data`.
    - Если статус заказа равен "COMPLETED", извлекает дату заказа, получает название месяца и увеличивает суммарные расходы для этого месяца.
    - Находит месяц(ы) с наибольшими расходами.
    - Возвращает JSON-представление месяц(-ев) с максимальными расходами, отсортированные по порядку в исходном списке.
5. Функция `perform_report()` выполняет отчет:
    - Читает данные из файла и сохраняет их в переменную `data`.
    - Генерирует отчет вызовом функции `generate_report(data)`.
    - Выводит результат отчета на экран.
6. Если скрипт запущен непосредственно (а не импортирован как модуль), вызывает функцию `perform_report()` для выполнения отчета.

Это позволяет пользователю запустить программу и получить отчет о месяцах с наибольшими расходами на основе данных из файла `input.json`.

## Инструкция по сборке и запуску решения
1. Откройте терминал или командную строку.
2. Перейдите в директорию, в которой вы хотите клонировать репозиторий.
3. Введите ниже команду для клонирования репозитория.
   
   ```bash
   git clone https://github.com/proxod3-first/school2024-test-task1.git
   ```

4. Более того, необходимо разместить файл `input.json` с данными о заказах в той же директории, в которой находится основной python-скрипт (`report.py`). Если он не найден, то необходимо нужно его составить по соответствующей структуре из ТЗ.
5. Запустите python-скрипт для выполнения процесса составления отчета (ниже приведены команды для его запуска).

   ```bash
   cd src
   python report.py
   ```
