# Тестовое задание для отбора на Летнюю ИТ-школу КРОК по разработке

## Условие задания
Один развивающийся и перспективный маркетплейс активно растет в настоящее время. Текущая команда разработки вовсю занята тем, что развивает ядро системы. Помимо этого, перед CTO маркетплейса стоит задача — разработать подсистему аналитики, которая на основе накопленных данных формировала бы разнообразные отчеты и статистику.

Вы — компания подрядчик, с которой маркетплейс заключил рамочный договор на выполнение работ по разработке этой подсистемы. В рамках первого этапа вы условились провести работы по прототипированию и определению целевого технологического стека и общих подходов к разработке.

На одном из совещаний с Заказчиком вы определили задачу, на которой будете выполнять работы по прототипированию. В качестве такой задачи была выбрана разработка отчета о периодах наибольших трат со стороны пользователей.

Аналитики со стороны маркетплейса предоставили небольшой срез массива данных (файл format.json) о покупках пользователей, на примере которого вы смогли бы ознакомиться с форматом входных данных. Каждая запись данного среза содержит следующую информацию:
- Идентификатор пользователя;
- Дата и время оформления заказа;
- Статус заказа;
- Сумма заказа.

В пояснительной записке к массиву данных была уточняющая информация относительно статусов заказов:
- COMPLETED (Завершенный заказ);
- CANCELED (Отмененный заказ);
- CREATED (Созданный заказ, еще не оплаченный);
- DELIVERY (Созданный и оплаченный заказ, который доставляется).

Необходимо разработать отчет, вычисляющий по полученному массиву данных месяц, когда пользователи тратили больше всего. Если максимальная сумма пользовательских трат была в более, чем одном месяце, отчет должен показывать все такие месяцы. В отчете должны учитываться только завершенные заказы.

Требования к реализации:
1. Реализация должна содержать, как минимум, одну процедуру (функцию/метод), отвечающую за формирование отчета, и должна быть описана в readme.md в соответствии с чек-листом;
2. В качестве входных данных программа использует json-файл (input.json), соответствующий структуре, описанной в условиях задания;
3. Процедура (функция/метод) формирования отчета должна возвращать строку в формате json следующего формата:
   - {«months»: [«march»]} 
   - {«months»: [«march», «december»]}
4. Найденный в соответствии с условием задачи месяц должен выводиться на английском языке в нижнем регистре. Если месяцев несколько, то на вывод они все подаются на английском языке в нижнем регистре в порядке их следования в течение года.

## Автор решения
Васильков Александр Сергеевич
## Описание реализации

Описание основных классов и их назначения: 

_Main.java_:

- Этот класс является главным классом приложения.
- В методе main происходит обработка аргументов командной строки, чтение данных из JSON-файла, инициализация объектов, необходимых для работы с JSON (ObjectMapper), вызов метода solve из класса Solution для обработки заказов и вывод результата.

 _Solution.java_:

- Этот класс отвечает за решение задачи по обработке заказов.
- В конструкторе Solution принимаются массив заказов и статус заказа для фильтрации.
- Метод solve осуществляет фильтрацию заказов по статусу, суммирование общей суммы заказов по месяцам и поиск месяцев с максимальным оборотом.
- Вспомогательные методы getMonthlyMaxValue, findOrderedMonthsEqualToMaxTotal и filterOrdersAndSumByMonthTotal используются для выполнения отдельных частей задачи.

 _OrderModels.java_:

- Этот класс содержит модели данных для заказов.
- Определяется перечисление Status для статусов заказа.
- Внутри класса определены две записи: Order для хранения данных о заказе и Result для хранения результата обработки заказов.

Алгоритм работы программы :
- Программа получает имя JSON-файла из аргументов командной строки.
- Путь к файлу определяется с помощью вспомогательного класса FileUtils.
- Создается экземпляр ObjectMapper, который используется для чтения данных из JSON-файла в массив объектов заказов.
- Создается экземпляр класса Solution, который принимает массив заказов и статус заказа для фильтрации.
-  В методе solve заказы фильтруются по статусу "COMPLETED", суммируется общая сумма заказов по месяцам, находится месяц с максимальным оборотом и возвраащется результат(месяцы), который предварительно отсортирвоан в порядке следования месяцев в течение года.
-  Результат обработки заказов преобразуется в формат JSON. JSON-строка выводится в стандартный вывод.
-  Программа перехватывает возможные исключения выводит соответствующие сообщения об ошибке.

  
## Инструкция по сборке и запуску решения
## Windows
> Предварительно: `Необходимо открыть консоль.` ВВодим команды представленные ниже.
```sh
git clone https://github.com/Ioutcast/school2024-test-task1.git
cd .\school2024-test-task1\solution\out
```
Запуск программы с  помощью скрипта. Вводим в консоль :
```sh
start.bat
```
Запуск программы ручками. Вводим в консоль :
```sh
java -jar vasilkov-task-solution-jar-with-dependencies.jar input.json
```
## Linux
> Предварительно: `Необходимо открыть консоль.` ВВодим команды представленные ниже.
```sh
git clone https://github.com/Ioutcast/school2024-test-task1.git
cd ./school2024-test-task1/solution/out
```
Запуск программы с  помощью скрипта. Вводим в консоль :
```sh
chmod +x start.sh
./start.sh
```
Запуск программы ручками. Вводим в консоль :
```sh
java -jar vasilkov-task-solution-jar-with-dependencies.jar input.json
```
